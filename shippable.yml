language: ruby
rvm:
  - 1.9.3
install:
  - curl -sSL https://get.docker.com/ubuntu/ | sudo sh
  - sudo service docker start
  - sudo service docker status
  # http://stackoverflow.com/questions/25077685/docker-container-failing-to-start-on-boot
  - sleep 10
  - curl -L https://www.opscode.com/chef/install.sh | sudo bash -s -- -P chefdk
  - sudo chef gem install kitchen-docker
  - chef exec bundle install
script:
  - chef exec bundle exec rubocop .
  - chef exec bundle exec foodcritic -G .
  - chef exec bundle exec rubocop .
  - chef exec bundle exec berks install
  - chef exec bundle exec rspec

